
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>DataTables | Gentelella</title>

    <!-- Bootstrap -->
    <link href="/table/gentela/vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="/table/gentela/vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="/table/gentela/vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
    <link href="/table/gentela/vendors/iCheck/skins/flat/green.css" rel="stylesheet">
    <!-- Datatables -->
    <link href="/table/gentela/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
    <link href="/table/gentela/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
    <link href="/table/gentela/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet">
    <link href="/table/gentela/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
    <link href="/table/gentela/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet">
    <!-- Custom Theme Style -->
    <link href="/table/gentela/build/css/custom.min.css" rel="stylesheet">

</head>
<style>
    #filter {
        margin-bottom: 20px !important;
        margin-left: 20px;
        margin-right: 20px;
        margin-top: none;
    }

        #filter button {
            width: 100%;
            height: 100%;
            background-color: #3498db; /* Arka plan rengi */
            color: #ffffff; /* Yazı rengi */
            border: none; /* Kenarlık yok */
            padding: 10px; /* Buton içeriği içinde boşluk */
            font-size: 16px; /* Yazı boyutu */
            cursor: pointer; /* İşaretçi stilini el işareti yap */
        }

            #filter button:hover {
                background-color: white;
                color: #2980b9;
            }
    /* Arka plan rengi */
    #cityDropdown {
        background-color: white;
        position: absolute;
        z-index: 1;
        width: 82%; /* Genişlik 100% olacak */
    }

        #cityDropdown div {
            color: black;
            padding: 5px;
        }

            /* Seçeneklerin üzerine gelindiğinde arka plan ve yazı rengini değiştir */
            #cityDropdown div:hover {
                background-color: #3498db; /* Arka plan rengi */
                color: white; /* Yazı rengi */
                cursor: pointer;
            }

    #districtDropdown {
        background-color: white;
        position: absolute;
        z-index: 1;
        width: 82%; /* Genişlik 100% olacak */
    }

        #districtDropdown div {
            color: black;
            padding: 5px;
        }

            /* Seçeneklerin üzerine gelindiğinde arka plan ve yazı rengini değiştir */
            #districtDropdown div:hover {
                background-color: #3498db; /* Arka plan rengi */
                color: white; /* Yazı rengi */
                cursor: pointer;
            }


</style>
<body class="nav-md">
    <div class="container body">
        <div class="main_container">
            <div class="col-md-3 left_col">
                <div class="left_col" style="">
                    <div class="clearfix"></div>
                    <!-- menu profile quick info -->
                    <div class="profile clearfix">
                        <div class="profile_pic">
                            <img src="/images/Logo.png" style="width:200px; height:auto; margin-left:10px;margin-top:10px;" alt="..." class="">
                        </div>
                    </div>
                    <div class="navbar nav_title" style="border: 0; margin-bottom:10px;">
                        @{
                            string controllerName = ViewContext.RouteData.Values["controller"].ToString();
                            string actionName = ViewContext.RouteData.Values["action"].ToString();
                        }

                        @if (controllerName == "Customer" && actionName == "Index")
                        {
                            <a href="#" class="site_title"><i class="fa fa-home"></i> <span style="font-size:18px;">Müşteri Portföyü</span></a>
                        }
                        else if (controllerName == "Estate" && actionName == "Index")
                        {
                            <a href="#" class="site_title"><i class="fa fa-home"></i> <span style="font-size:18px;">Emlak Portföyü</span></a>
                        }
                    </div>
                    <!-- /menu profile quick info -->
                    <br />
                    <!-- sidebar menu -->
                    <div id="" class="">
                        <div class="">
                            <div id="filter">
                                <label class="profile clearfix" style="color:white; margin-top:50px;">Konut</label>
                                <div class="profile clearfix">
                                    <select class="form-control">
                                
                                    </select>
                                </div>
                            </div>
                            <div id="filter">
                                <label class="profile clearfix" style="color:white;">Emlak Tipi</label>
                                <div class="profile clearfix">
                                    <select class="form-control" id="estateType" >
                                     <option></option>
                                    </select>
                                </div>
                            </div>
                            <div id="filter">
                                <label class="profile clearfix" style="color: white;">İl</label>
                                <div class="profile clearfix">
                                    <input type="text" id="cityInput" class="form-control">
                                    <div id="cityDropdown"">
                                        <!-- Seçenekler burada görünecek -->
                                    </div>
                                </div>
                            </div>
                            <div id="filter">
                                <label class="profile clearfix" style="color:white;">İlçe</label>
                                <div class="profile clearfix">
                                    <input type="text" id="districtInput" class="form-control">
                                    <div id="districtDropdown">
                                        <!-- Seçenekler burada görünecek -->
                                    </div>
                                </div>
                            </div>
                            <div id="filter">
                                <label class="profile clearfix" style="color:white;">Fiyat Aralığı</label>
                                <div class="row profile clearfix">
                                    <div class="col-md-6">
                                        <input class="form-control">

                                        </input>
                                    </div>
                                    <div class="col-md-6">
                                        <input class="form-control">

                                        </input>
                                    </div>
                                </div>
                            </div>
                            <div id="filter">
                                <div class="profile clearfix">
                                    <button class="btn btn-primary">Ara</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /sidebar menu -->
                    <!-- /menu footer buttons -->
                    <div class="sidebar-footer hidden-small">
                        <a data-toggle="tooltip" data-placement="top" title="Settings">
                            <span class="glyphicon glyphicon-cog" aria-hidden="true" style="color:lightgray;"></span>
                        </a>
                        <a data-toggle="tooltip" data-placement="top" title="FullScreen">
                            <span class="glyphicon glyphicon-fullscreen" aria-hidden="true" style="color:lightgray;"></span>
                        </a>
                        <a data-toggle="tooltip" data-placement="top" title="Geri Dön" href="/Home/Index">
                            <span class="glyphicon glyphicon-backward " aria-hidden="true" style="color:lightgray;"></span>
                        </a>
                        <a data-toggle="tooltip" data-placement="top" title="Çıkış Yap" href="#">
                            <span class="glyphicon glyphicon-off" aria-hidden="true" style="color:lightgray;"></span>
                        </a>
                    </div>
                    <!-- /menu footer buttons -->
                </div>
            </div>

            <!-- top navigation -->
            <div class="top_nav">
                <div class="nav_menu" style="height:70px;">
                    <nav>
                        <div class="nav toggle">
                            <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                        </div>

                    </nav>
                </div>
            </div>
            <!-- /top navigation -->
            <!-- page content -->
            <div class="right_col" role="main">
                <div class="" >
                    @RenderBody()
                </div>
            </div>
            <!-- /page content -->
            <!-- footer content -->
            <footer>
                <div class="pull-right">
                    Gentelella - Bootstrap Admin Template by <a href="https://colorlib.com">Colorlib</a>
                </div>
                <div class="clearfix"></div>
            </footer>
            <!-- /footer content -->
        </div>
    </div>
    <!-- jQuery -->
    <script src="/table/gentela/vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="/table/gentela/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="/table/gentela/vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="/table/gentela/vendors/nprogress/nprogress.js"></script>
    <!-- iCheck -->
    <script src="/table/gentela/vendors/iCheck/icheck.min.js"></script>
    <!-- Datatables -->
    <script src="/table/gentela/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="/table/gentela/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
    <script src="/table/gentela/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
    <script src="/table/gentela/vendors/jszip/dist/jszip.min.js"></script>
    <script src="/table/gentela/vendors/pdfmake/build/pdfmake.min.js"></script>
    <script src="/table/gentela/vendors/pdfmake/build/vfs_fonts.js"></script>
    <script src="/table/gentela/build/js/custom.min.js"></script>

</body>
@*<script>
    document.addEventListener('DOMContentLoaded',estateTypes);
    function estateTypes(){
        fetch()
    }













</script>*@

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Konut verilerini getir
        function fetchKonutData() {
            var apiURL = 'https://localhost:7124/api/EstateTypeType/GetAllListEstateType';
            fetch(apiURL)
            
                .then(response => response.json())
                .then(data => {
                    var estateSelect = document.getElementById('estateType');
                    data.data.forEach(option => {
                        var optionElement = document.createElement('option');
                        optionElement.value = option.estateTypeId;
                        optionElement.textContent = option.name;
                        estateSelect.appendChild(optionElement);
                    });
                })
                .catch(error => {
                    console.error('Veri çekme hatası:', error);
                });
        }
        fetchKonutData(); // Konut verilerini getir


        // Şehir ve ilçe için yeniden kullanılabilir işlevler
        function updateOptions(inputElement, dropdownElement, apiURL, maxDisplayedItems) {
            inputElement.addEventListener('input', function () {
                var keyword = inputElement.value;
                updateDropdownOptions(inputElement, dropdownElement, apiURL, keyword, maxDisplayedItems);
            });

            inputElement.addEventListener('click', function () {
                var keyword = inputElement.value;
                updateDropdownOptions(inputElement, dropdownElement, apiURL, keyword, maxDisplayedItems);
                toggleDropdown(dropdownElement); // Seçenekleri göster veya gizle
            });
        }

        function toggleDropdown(dropdownElement) {
            if (dropdownElement.style.display === 'block') {
                dropdownElement.style.display = 'none';
            } else {
                dropdownElement.style.display = 'block'; // Burada bir yazım hatası vardı
            }
        }

        function updateDropdownOptions(inputElement, dropdownElement, apiURL, keyword, maxDisplayedItems) {
            dropdownElement.innerHTML = ""; // Önceki seçenekleri temizle
            var displayedItems = 0;

            fetch(apiURL)
                .then(response => response.json())
                .then(data => {
                    if (Array.isArray(data.data)) {
                        var itemsData = data.data;
                        itemsData.forEach(item => {
                            var itemName = item.name.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
                            if (displayedItems < maxDisplayedItems && itemName.toLowerCase().includes(keyword.toLowerCase())) {
                                var optionElement = document.createElement('div');
                                optionElement.textContent = item.name;
                                optionElement.addEventListener('click', function () {
                                    inputElement.value = item.name;
                                    dropdownElement.style.display = 'none';
                                });
                                dropdownElement.appendChild(optionElement);
                                displayedItems++;
                            }
                        });
                    }
                })
                .catch(error => {
                    console.error('API isteği başarısız oldu:', error);
                });
        }

        // Şehir için işlevi çağır
        var cityInput = document.getElementById('cityInput');
        var cityDropdown = document.getElementById('cityDropdown');
        var cityApiURL = 'https://localhost:7124/api/City/GetAllCity';

        updateOptions(cityInput, cityDropdown, cityApiURL, 10);

        // İlçe için işlevi çağır
        var districtInput = document.getElementById('districtInput');
        var districtDropdown = document.getElementById('districtDropdown');

        // İlçeleri güncelle fonksiyonunu çağırmak için il seçim kutusuna bir 'change' olayı ekleyin
        cityInput.addEventListener('change', function () {
            var selectedCityId = cityInput.value; // Seçilen il'in ID'sini alın
            var dynamicDistrictApiURL = 'https://localhost:7124/api/District/GetByCityId?id=' + selectedCityId;
            updateOptions(districtInput, districtDropdown, dynamicDistrictApiURL, 10);
        });

        // İlçe seçildiğinde ilin adını ve ilçe adını güncelle
        districtInput.addEventListener('change', function () {
            var selectedCity = cityInput.value;
            var selectedDistrict = districtInput.value;
            cityInput.value = selectedCity + ' - ' + selectedDistrict;
        });
    });
</script>
@*<script> //BUrası yukarıdaki kodların tamamen aynısı oluğ jquery olarak yazılmış halleri....
    $(document).ready(function () {
        // Konut verilerini getir
        function fetchKonutData() {
            var apiURL = 'https://localhost:7124/api/EstateTypeType/GetAllListEstateType';
            $.get(apiURL, function (data) {
                var estateSelect = $('#estateType');
                $.each(data.data, function (index, option) {
                    estateSelect.append($('<option>', {
                        value: option.estateTypeId,
                        text: option.name
                    }));
                });
            }).fail(function (error) {
                console.error('Veri çekme hatası:', error);
            });
        }
        fetchKonutData(); // Konut verilerini getir

        // Şehir ve ilçe için yeniden kullanılabilir işlevler
        function updateOptions(inputElement, dropdownElement, apiURL, maxDisplayedItems) {
            inputElement.on('input', function () {
                var keyword = inputElement.val();
                updateDropdownOptions(inputElement, dropdownElement, apiURL, keyword, maxDisplayedItems);
            });

            inputElement.on('click', function () {
                var keyword = inputElement.val();
                updateDropdownOptions(inputElement, dropdownElement, apiURL, keyword, maxDisplayedItems);
                toggleDropdown(dropdownElement); // Seçenekleri göster veya gizle
            });
        }

        function toggleDropdown(dropdownElement) {
            if (dropdownElement.css('display') === 'block') {
                dropdownElement.css('display', 'none');
            } else {
                dropdownElement.css('display', 'block'); // Burada bir yazım hatası vardı
            }
        }

        function updateDropdownOptions(inputElement, dropdownElement, apiURL, keyword, maxDisplayedItems) {
            dropdownElement.empty(); // Önceki seçenekleri temizle
            var displayedItems = 0;

            $.get(apiURL, function (data) {
                if (Array.isArray(data.data)) {
                    var itemsData = data.data;
                    $.each(itemsData, function (index, item) {
                        var itemName = item.name.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
                        if (displayedItems < maxDisplayedItems && itemName.toLowerCase().includes(keyword.toLowerCase())) {
                            var optionElement = $('<div>', {
                                text: item.name
                            });
                            optionElement.on('click', function () {
                                inputElement.val(item.name);
                                dropdownElement.css('display', 'none');
                            });
                            dropdownElement.append(optionElement);
                            displayedItems++;
                        }
                    });
                }
            }).fail(function (error) {
                console.error('API isteği başarısız oldu:', error);
            });
        }

        // Şehir için işlevi çağır
        var cityInput = $('#cityInput');
        var cityDropdown = $('#cityDropdown');
        var cityApiURL = 'https://localhost:7124/api/City/GetAllCity';

        updateOptions(cityInput, cityDropdown, cityApiURL, 10);

        // İlçe için işlevi çağır
        var districtInput = $('#districtInput');
        var districtDropdown = $('#districtDropdown');

        // İlçeleri güncelle fonksiyonunu çağırmak için il seçim kutusuna bir 'change' olayı ekleyin
        cityInput.on('change', function () {
            var selectedCityId = cityInput.val(); // Seçilen il'in ID'sini alın
            var dynamicDistrictApiURL = 'https://localhost:7124/api/District/GetByCityId?id=' + selectedCityId;
            updateOptions(districtInput, districtDropdown, dynamicDistrictApiURL, 10);
        });

        // İlçe seçildiğinde ilin adını ve ilçe adını güncelle
        districtInput.on('change', function () {
            var selectedCity = cityInput.val();
            var selectedDistrict = districtInput.val();
            cityInput.val(selectedCity + ' - ' + selectedDistrict);
        });
    });
</script>*@
</html>